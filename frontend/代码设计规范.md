# 🛠 redspiderAI 项目代码设计规范 (v1.0)

为了保证 AI 审计系统在处理大规模文档时的稳定性和团队协作效率，必须遵守以下开发准则：

## 1. 文件规模控制 (File Size Limit)

* **硬性指标：** 单个代码文件（`.vue` 等）的最大行数不得超过 **1,000 行**。
* **执行动作：** 若逻辑持续增加导致超过 1k 行，必须按功能模块拆分为多个子文件。
* **目的：** 降低阅读压力，提高 Git 冲突解决时的效率。

## 2. 函数精简原则 (Function Granularity)

* **硬性指标：** 单个函数/方法的代码量不得超过 **100 行**。
* **执行动作：** 若函数内逻辑过于复杂（嵌套过多或步骤繁琐），必须通过 **提取方法 (Extract Method)** 拆分为多个私有辅助函数。
* **目的：** 提高代码的可测试性（Unit Testing）和复用性。

## 3. 消灭冗余代码 (DRY - Don't Repeat Yourself)

* **准则：** 严禁声明功能近似或完全一致的函数。
* **执行动作：** * **通用逻辑：** 建立模板函数或泛型（Generic）处理。
* **跨模块逻辑：** 提取至各语言的 `utils` 或 `common` 包中。

* **目的：** 降低维护成本，避免“改一处漏一处”的低级错误。

## 4. 极致性能追求 (Performance Optimization)

* **准则：** 在编写核心逻辑（尤其是文档解析和数据比对）时，必须将**时间复杂度**降至最低。
* **执行要求：**
* 优先使用 时间复杂度低 的算法；严禁在循环内嵌套高耗时查询。
* 在处理大规模结构化数据时，应优先考虑使用 **哈希表 (HashMap)** 替代线性搜索。

* **目的：** 确保系统在处理 500 页以上大文件时仍能秒级响应。

## 5. 目录结构规范 (Directory Organization)

* **硬性指标：** 每个文件夹（Package/Module）中的代码文件数量不得超过 **6 个**。
* **执行动作：** * 当文件过多时，必须根据业务逻辑或功能属性（如 `core/`, `api/`, `utils/`, `types/`）创建子文件夹进行重构。
* **目的：** 保持项目目录树的“扁平且清晰”，实现“看目录即知功能”。

---
